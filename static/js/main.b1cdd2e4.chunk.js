(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{42:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(33),i=n.n(c),s=(n(42),n(5)),o=n(6),u=n(8),l=n(7),d=n(58),h=n(3),j=n(2),b=n.n(j),p=n(10),m=n(13),f=n(4),O=n(0),v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsx)("h2",{children:"Carregando..."})})}}]),n}(a.Component),x=n(26),g="user",k=function(e){return localStorage.setItem(g,JSON.stringify(e))},y=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},C=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(g));null===t&&(t={}),y(t)(e)}))},S=function(e){return new Promise((function(t){k(Object(x.a)(Object(x.a)({},{name:"",email:"",image:"",description:""}),e)),y("OK")(t)}))},w=function(e){return new Promise((function(t){k(Object(x.a)({},e)),y("OK")(t)}))},I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={loginName:"",load:!1,loginSave:!1},e.onHandleChange=e.onHandleChange.bind(Object(f.a)(e)),e.onSubmitBtn=e.onSubmitBtn.bind(Object(f.a)(e)),e}return Object(o.a)(n,[{key:"onHandleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"onSubmitBtn",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.loginName,t.preventDefault(),this.setState({load:!0}),e.next=5,S({name:n});case 5:this.setState({load:!1,loginSave:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loginName,n=e.load;return e.loginSave?Object(O.jsx)(h.a,{to:"/search"}):Object(O.jsxs)("div",{"data-testid":"page-login",children:[Object(O.jsx)("h2",{children:"Login"}),Object(O.jsxs)("form",{children:[Object(O.jsxs)("label",{htmlFor:"login-input",children:["Login:",Object(O.jsx)("input",{type:"text","data-testid":"login-name-input",id:"login-input",value:t,name:"loginName",onChange:this.onHandleChange})]}),Object(O.jsx)("button",{type:"submit","data-testid":"login-submit-button",disabled:t.length<3,onClick:this.onSubmitBtn,children:"Entrar"}),n&&Object(O.jsx)(v,{})]})]})}}]),n}(a.Component),N=n(34),H=n(15),F=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={loginName:"",load:!0},e.getUserAndRemoveLoad=e.getUserAndRemoveLoad.bind(Object(f.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getUserAndRemoveLoad()}},{key:"getUserAndRemoveLoad",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C().then((function(e){var n=e.name;return t.setState({loginName:n,load:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loginName;return e.load?Object(O.jsx)(v,{}):Object(O.jsxs)("section",{"data-testid":"header-component",children:[Object(O.jsx)(H.b,{to:"/search","data-testid":"link-to-search",children:"Buscar"}),Object(O.jsx)(H.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favoritos"}),Object(O.jsx)(H.b,{to:"/profile","data-testid":"link-to-profile",children:"Perfil"}),Object(O.jsx)("h2",{children:"Cabe\xe7alho"}),Object(O.jsx)("h2",{"data-testid":"header-user-name",children:t})]})}}]),n}(a.Component),U=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.trackId,n=e.trackName,a=e.previewUrl,r=e.onHandleChange,c=e.isChecked;return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:n}),Object(O.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(O.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(O.jsx)("code",{children:"audio"})]}),Object(O.jsxs)("label",{htmlFor:t,children:["Favorita",Object(O.jsx)("input",{"data-testid":"checkbox-music-".concat(t),type:"checkbox",name:"track",checked:c,id:t,onChange:r})]})]})})}}]),n}(a.Component),A=n(25),D="favorite_songs";JSON.parse(localStorage.getItem(D))||localStorage.setItem(D,JSON.stringify([]));var P=function(){return JSON.parse(localStorage.getItem(D))},T=function(e){return localStorage.setItem(D,JSON.stringify(e))},J=function(e){return function(t){setTimeout((function(){t(e)}),500)}},B=function(){return new Promise((function(e){var t=P();J(t)(e)}))},E=function(e){return new Promise((function(t){if(e){var n=P();T([].concat(Object(A.a)(n),[e]))}J("OK")(t)}))},L=function(e){return new Promise((function(t){var n=P();T(n.filter((function(t){return t.trackId!==e.trackId}))),J("OK")(t)}))},R=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={load:!1,dataAlbum:[],dataTracks:[],favoritesMusics:[]},a.fetchMusics=a.fetchMusics.bind(Object(f.a)(a)),a.onHandleChangeChecked=a.onHandleChangeChecked.bind(Object(f.a)(a)),a.getFavorites=a.getFavorites.bind(Object(f.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchMusics(),this.getFavorites()}},{key:"onHandleChangeChecked",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.favoritesMusics,this.setState({load:!0}),!n.some((function(e){return e.trackId===t.trackId}))){e.next=7;break}return e.next=5,L(t);case 5:e.next=9;break;case 7:return e.next=9,E(t);case 9:return e.next=11,B().then((function(e){return a.setState((function(){return{favoritesMusics:e}}))}));case 11:this.setState({load:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFavorites",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({load:!0}),e.next=3,B().then((function(e){return t.setState({favoritesMusics:e})}));case 3:this.setState({load:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMusics",value:function(){var e=this,t=window.location.pathname.replace(/[^0-9]/g,"");U(t).then((function(t){var n=Object(N.a)(t),a=n[0],r=n.slice(1);return e.setState({dataAlbum:a,dataTracks:r})}))}},{key:"renderTracks",value:function(){var e=this.state.dataAlbum;return Object(O.jsx)("section",{className:"sectionTracks",children:Object(O.jsxs)("div",{className:"cardAlbum",children:[Object(O.jsx)("h2",{"data-testid":"artist-name",children:e.artistName}),Object(O.jsx)("p",{"data-testid":"album-name",children:"Album: ".concat(e.collectionName,"\n            Artista: ").concat(e.artistName)}),Object(O.jsx)("img",{src:e.artworkUrl100,alt:"Capa de album"})]})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.dataTracks,a=t.load,r=t.favoritesMusics;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F,{}),Object(O.jsxs)("div",{"data-testid":"page-album",children:[this.renderTracks(),a?Object(O.jsx)(v,{}):null,n.map((function(t){var n=r.some((function(e){return e.trackId===t.trackId}));return Object(O.jsx)(M,{onHandleChange:function(){return e.onHandleChangeChecked(t)},isChecked:n,trackId:t.trackId,trackName:t.trackName,previewUrl:t.previewUrl},t.trackId)}))]})]})}}]),n}(a.Component),q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={load:!1,listFavorites:[]},e.getFavMusics=e.getFavMusics.bind(Object(f.a)(e)),e.removeTrack=e.removeTrack.bind(Object(f.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getFavMusics()}},{key:"getFavMusics",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({load:!0}),e.next=3,B().then((function(e){return t.setState({listFavorites:e})}));case 3:this.setState({load:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeTrack",value:function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({load:!0}),e.next=3,L(t);case 3:return e.next=5,this.getFavMusics();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.load,a=t.listFavorites;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F,{}),Object(O.jsxs)("div",{"data-testid":"page-favorites",children:[Object(O.jsx)("h2",{children:"Favoritos"}),n?Object(O.jsx)(v,{}):null,a.map((function(t){return Object(O.jsx)(M,{onHandleChange:function(){return e.removeTrack(t)},isChecked:!0,trackId:t.trackId,trackName:t.trackName,previewUrl:t.previewUrl},t.trackId)}))]})]})}}]),n}(a.Component),K=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{"data-testid":"page-not-found",children:Object(O.jsx)("h2",{children:"Page was not found"})})}}]),n}(a.Component),_=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={load:!1,dataUsr:[]},e.fetchUser=e.fetchUser.bind(Object(f.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({load:!0}),e.next=3,C().then((function(e){return t.setState({dataUsr:e})}));case 3:this.setState({load:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.load,n=e.dataUsr;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F,{}),Object(O.jsx)("div",{"data-testid":"page-profile",children:t?Object(O.jsx)(v,{}):Object(O.jsxs)("div",{className:"cardProfile",children:[Object(O.jsx)("img",{src:n.image,alt:"Autorretrato do usu\xe1rio","data-testid":"profile-image"}),Object(O.jsx)("h2",{children:"Nome"}),Object(O.jsx)("p",{children:n.name}),Object(O.jsx)("h2",{children:"Email"}),Object(O.jsx)("p",{children:n.email}),Object(O.jsx)("h2",{children:"Descri\xe7\xe3o"}),Object(O.jsx)("p",{children:n.description}),Object(O.jsx)(H.b,{to:"/profile/edit",children:"Editar perfil"})]})})]})}}]),n}(a.Component),z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={load:!1,name:"",email:"",description:"",image:"",disable:!1,updated:!1},e.fetchUsr=e.fetchUsr.bind(Object(f.a)(e)),e.onHandleChanger=e.onHandleChanger.bind(Object(f.a)(e)),e.isDisable=e.isDisable.bind(Object(f.a)(e)),e.onHandleClick=e.onHandleClick.bind(Object(f.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchUsr()}},{key:"onHandleChanger",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(m.a)({},n,a)),this.isDisable()}},{key:"onHandleClick",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.name,a=t.email,r=t.image,c=t.description,this.setState({load:!0}),e.next=4,w({name:n,email:a,image:r,description:c});case 4:this.setState({updated:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isDisable",value:function(){var e=this.state,t=e.name,n=e.email,a=e.description,r=e.image;this.setState({disable:0===t.length||0===n.length||!n.match(/\S+@\S+\.\S+/)||0===a.length||0===r.length})}},{key:"fetchUsr",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({load:!0}),e.next=3,C().then((function(e){var n=e.name,a=e.email,r=e.description,c=e.image;return t.setState({name:n,email:a,description:r,image:c})}));case 3:this.setState({load:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.description,r=e.image,c=e.load,i=e.disable,s=e.updated;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F,{}),Object(O.jsxs)("div",{"data-testid":"page-profile-edit",children:[c?Object(O.jsx)(v,{}):Object(O.jsxs)("div",{className:"form__profile",children:[Object(O.jsx)("h2",{children:"Profile Edit Page"}),Object(O.jsxs)("form",{children:[Object(O.jsxs)("label",{htmlFor:"nameInput",children:["Nome",Object(O.jsx)("input",{id:"nameInput",name:"name",type:"text",value:t,"data-testid":"edit-input-name",onChange:this.onHandleChanger})]}),Object(O.jsxs)("label",{htmlFor:"emailInput",children:["Email",Object(O.jsx)("input",{name:"email",id:"emailInput",type:"email",value:n,onChange:this.onHandleChanger,"data-testid":"edit-input-email"})]}),Object(O.jsxs)("label",{htmlFor:"descriptionInput",children:["Descri\xe7\xe3o",Object(O.jsx)("textarea",{name:"description",id:"descriptionInput",type:"textarea",value:a,onChange:this.onHandleChanger,"data-testid":"edit-input-description"})]}),Object(O.jsxs)("label",{htmlFor:"imageInput",children:["Imagem",Object(O.jsx)("input",{name:"image",id:"imageInput",type:"text",value:r,onChange:this.onHandleChanger,"data-testid":"edit-input-image"})]}),Object(O.jsx)("button",{type:"submit","data-testid":"edit-button-save",disabled:i,onClick:this.onHandleClick,children:"Salvar"})]})]}),s&&Object(O.jsx)(h.a,{to:"/profile",exact:!0})]})]})}}]),n}(a.Component),G=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,r,c,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,i=c.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={nameSearched:"",searchInput:"",load:!1,data:"",request:!1},e.onHandleChanger=e.onHandleChanger.bind(Object(f.a)(e)),e.onHandleSearchClick=e.onHandleSearchClick.bind(Object(f.a)(e)),e.renderAlbums=e.renderAlbums.bind(Object(f.a)(e)),e}return Object(o.a)(n,[{key:"onHandleChanger",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"onHandleSearchClick",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.searchInput,t.preventDefault(),this.setState({load:!0,nameSearched:n}),e.next=5,G(n).then((function(e){return a.setState({data:e})}));case 5:this.setState({load:!1,request:!0,searchInput:""});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderAlbums",value:function(){var e=this.state.data;return 0===e.length?Object(O.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"}):e.map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:e.artworkUrl100,alt:e.collectionName}),Object(O.jsx)("h2",{children:e.artistName}),Object(O.jsx)(H.b,{to:{pathname:"/album/".concat(e.collectionId),query:{idCol:e.collectionId}},"data-testid":"link-to-album-".concat(e.collectionId),children:e.collectionName})]},e.collectionId)}))}},{key:"render",value:function(){var e=this.state,t=e.searchInput,n=e.load,a=e.nameSearched,r=e.request;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F,{}),Object(O.jsxs)("div",{"data-testid":"page-search",children:[Object(O.jsx)("h2",{children:"Search Page"}),Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{type:"text","data-testid":"search-artist-input",placeholder:"Nome do artista",name:"searchInput",value:t,onChange:this.onHandleChanger}),Object(O.jsx)("button",{type:"submit","data-testid":"search-artist-button",disabled:t.length<2,onClick:this.onHandleSearchClick,children:"Procurar"})]}),n?Object(O.jsx)(v,{}):Object(O.jsx)("h2",{children:"Resultado de \xe1lbuns de: ".concat(a)}),r&&this.renderAlbums()]})]})}}]),n}(a.Component);function V(){return Object(O.jsxs)(h.d,{children:[Object(O.jsx)(h.b,{path:"/search",exact:!0,component:Q}),Object(O.jsx)(h.b,{path:"/album/:id",component:R}),Object(O.jsx)(h.b,{path:"/favorites",component:q}),Object(O.jsx)(h.b,{path:"/profile",exact:!0,component:_}),Object(O.jsx)(h.b,{path:"/profile/edit",exact:!0,component:z}),Object(O.jsx)(h.b,{path:"/",exact:!0,component:I}),Object(O.jsx)(h.b,{path:"*",component:K})]})}var W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)(d.a,{children:Object(O.jsx)(V,{})})}}]),n}(r.a.Component);i.a.render(Object(O.jsx)(H.a,{basename:"/trybetunes",children:Object(O.jsx)(W,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.b1cdd2e4.chunk.js.map